<view class="container {{themeClass}}">
  <custom-nav showBack="{{true}}" />

  <view class="detail-card" wx:if="{{commit}}">
    <view class="header-row">
        <view class="title">{{commit.title}}</view>
        <view class="type-tag">{{typeMap[commit.type] || commit.type}}</view>
    </view>
    
    <view class="info-row">
        <text class="label">æäº¤ID</text>
        <text class="value code">{{commit._id}}</text>
    </view>
    
     <view class="info-row">
        <text class="label">é‡Œç¨‹èŠ‚ç‚¹</text>
        <text class="value highlight">{{commit.mileage}} km</text>
    </view>
    
    <view class="info-row">
        <text class="label">æ—¥æœŸ</text>
        <text class="value">{{commit.date}}</text>
    </view>

    <view class="divider"></view>

    <view class="section-label">è¯¦ç»†æè¿°</view>
    <view class="message-box">
        {{commit.message || 'æ— è¯¦ç»†æè¿°'}}
    </view>

    <view class="images-section" wx:if="{{commit.images && commit.images.length > 0}}">
      <view class="section-label">ç›¸å…³å›¾ç‰‡</view>
      <view class="images-grid">
        <image 
          wx:for="{{commit.images}}" 
          wx:key="index" 
          src="{{item}}" 
          class="image-item" 
          mode="aspectFill"
          bindtap="previewImage"
          data-index="{{index}}"
        />
      </view>
    </view>

    <view class="cost-section" wx:if="{{commit.cost}}">
        <view class="total-row">
            <text>æ€»è®¡è´¹ç”¨</text>
            <text class="total-price">Â¥ {{commit.cost.parts + commit.cost.labor}}</text>
        </view>
    </view>
  </view>

  <view class="action-bar" wx:if="{{commit}}">
    <view class="btn edit-btn" bindtap="onEdit">
      <text class="icon">âœï¸</text> ç¼–è¾‘
    </view>
    <view class="btn delete-btn" bindtap="onDelete">
      <text class="icon">ğŸ—‘ï¸</text> åˆ é™¤
    </view>
  </view>
</view>
